import{s as Ye,d as S,G as We,r as Xe,H as Ae,I as G,p as $e,i as Te,q as _,J as Be,b as x,K as Ne,f as E,h as ee,t as ce,F as fe,v as Pe,j as k,w as ie,x as Ie,o as qe,n as Ge,L as ze}from"../chunks/6quUHP5N.js";import{S as Je,i as Ue,t as Re,a as Oe,c as Qe,d as Ze,m as De,e as et,b as tt,g as at}from"../chunks/BFNAXppv.js";import{e as Ve,c as nt}from"../chunks/DIqvTF7t.js";import{P as st}from"../chunks/BSk7g7aJ.js";const ot=!0,dt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ot},Symbol.toStringTag,{value:"Module"}));function Fe(i,a,l){const u=i.slice();return u[14]=a[l],u}function He(i){let a,l=i[14]+"",u,d;return{c(){a=k("option"),u=ie(l),this.h()},l(h){a=E(h,"OPTION",{class:!0});var P=ee(a);u=ce(P,l),P.forEach(S),this.h()},h(){a.__value=d=i[14],G(a,a.__value),x(a,"class","svelte-1ct0iaa")},m(h,P){Te(h,a,P),_(a,u)},p(h,P){P&32&&l!==(l=h[14]+"")&&$e(u,l),P&32&&d!==(d=h[14])&&(a.__value=d,G(a,a.__value))},d(h){h&&S(a)}}}function je(i){let a,l;return a=new st({props:{sketch:i[6],style:"position:absolute; top:0; left:0;"}}),{c(){tt(a.$$.fragment)},l(u){et(a.$$.fragment,u)},m(u,d){De(a,u,d),l=!0},p:Ge,i(u){l||(Oe(a.$$.fragment,u),l=!0)},o(u){Re(a.$$.fragment,u),l=!1},d(u){Ze(a,u)}}}function lt(i){let a,l,u,d,h,P="Fungal",M,W="Leaf",C,te="Root",B,ge="Chaos",R,ye="COVID",_e,X,e,p,I,Se="(Alle)",me,O,he,b,ve,K,se,ae=i[3].length+"",ne,q,H,L,ue=i[4],J,oe,de,N=Ve(i[5]),o=[];for(let s=0;s<N.length;s+=1)o[s]=He(Fe(i,N,s));let y=je(i);return{c(){a=k("div"),l=k("label"),u=ie(`Pattern:
    `),d=k("select"),h=k("option"),h.textContent=P,M=k("option"),M.textContent=W,C=k("option"),C.textContent=te,B=k("option"),B.textContent=ge,R=k("option"),R.textContent=ye,_e=Ie(),X=k("label"),e=ie(`Keyword:
    `),p=k("select"),I=k("option"),I.textContent=Se;for(let s=0;s<o.length;s+=1)o[s].c();me=Ie(),O=k("label"),he=ie(`Text:
    `),b=k("input"),ve=Ie(),K=k("span"),se=ie("("),ne=ie(ae),q=ie(" angezeigt)"),H=Ie(),L=k("div"),y.c(),this.h()},l(s){a=E(s,"DIV",{class:!0});var f=ee(a);l=E(f,"LABEL",{class:!0});var g=ee(l);u=ce(g,`Pattern:
    `),d=E(g,"SELECT",{class:!0});var t=ee(d);h=E(t,"OPTION",{class:!0,"data-svelte-h":!0}),fe(h)!=="svelte-z25kvi"&&(h.textContent=P),M=E(t,"OPTION",{class:!0,"data-svelte-h":!0}),fe(M)!=="svelte-1tye3ji"&&(M.textContent=W),C=E(t,"OPTION",{class:!0,"data-svelte-h":!0}),fe(C)!=="svelte-j6h65q"&&(C.textContent=te),B=E(t,"OPTION",{class:!0,"data-svelte-h":!0}),fe(B)!=="svelte-160xivm"&&(B.textContent=ge),R=E(t,"OPTION",{class:!0,"data-svelte-h":!0}),fe(R)!=="svelte-19h5kik"&&(R.textContent=ye),t.forEach(S),g.forEach(S),_e=Pe(f),X=E(f,"LABEL",{class:!0});var n=ee(X);e=ce(n,`Keyword:
    `),p=E(n,"SELECT",{class:!0});var v=ee(p);I=E(v,"OPTION",{class:!0,"data-svelte-h":!0}),fe(I)!=="svelte-7y26px"&&(I.textContent=Se);for(let T=0;T<o.length;T+=1)o[T].l(v);v.forEach(S),n.forEach(S),me=Pe(f),O=E(f,"LABEL",{class:!0});var A=ee(O);he=ce(A,`Text:
    `),b=E(A,"INPUT",{type:!0,placeholder:!0,class:!0}),A.forEach(S),ve=Pe(f),K=E(f,"SPAN",{});var r=ee(K);se=ce(r,"("),ne=ce(r,ae),q=ce(r," angezeigt)"),r.forEach(S),f.forEach(S),H=Pe(s),L=E(s,"DIV",{class:!0});var w=ee(L);y.l(w),w.forEach(S),this.h()},h(){h.__value="fungal",G(h,h.__value),x(h,"class","svelte-1ct0iaa"),M.__value="leaf",G(M,M.__value),x(M,"class","svelte-1ct0iaa"),C.__value="root",G(C,C.__value),x(C,"class","svelte-1ct0iaa"),B.__value="chaos",G(B,B.__value),x(B,"class","svelte-1ct0iaa"),R.__value="covid",G(R,R.__value),x(R,"class","svelte-1ct0iaa"),x(d,"class","svelte-1ct0iaa"),i[2]===void 0&&Ne(()=>i[8].call(d)),x(l,"class","svelte-1ct0iaa"),I.__value="",G(I,I.__value),x(I,"class","svelte-1ct0iaa"),x(p,"class","svelte-1ct0iaa"),i[0]===void 0&&Ne(()=>i[9].call(p)),x(X,"class","svelte-1ct0iaa"),x(b,"type","text"),x(b,"placeholder","Suche im Text..."),x(b,"class","svelte-1ct0iaa"),x(O,"class","svelte-1ct0iaa"),x(a,"class","pattern-ui svelte-1ct0iaa"),x(L,"class","viz-container svelte-1ct0iaa")},m(s,f){Te(s,a,f),_(a,l),_(l,u),_(l,d),_(d,h),_(d,M),_(d,C),_(d,B),_(d,R),Ae(d,i[2],!0),_(a,_e),_(a,X),_(X,e),_(X,p),_(p,I);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(p,null);Ae(p,i[0],!0),_(a,me),_(a,O),_(O,he),_(O,b),G(b,i[1]),_(a,ve),_(a,K),_(K,se),_(K,ne),_(K,q),Te(s,H,f),Te(s,L,f),y.m(L,null),J=!0,oe||(de=[Be(d,"change",i[8]),Be(p,"change",i[9]),Be(b,"input",i[10])],oe=!0)},p(s,[f]){if(f&4&&Ae(d,s[2]),f&32){N=Ve(s[5]);let g;for(g=0;g<N.length;g+=1){const t=Fe(s,N,g);o[g]?o[g].p(t,f):(o[g]=He(t),o[g].c(),o[g].m(p,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=N.length}f&33&&Ae(p,s[0]),f&2&&b.value!==s[1]&&G(b,s[1]),(!J||f&8)&&ae!==(ae=s[3].length+"")&&$e(ne,ae),f&16&&Ye(ue,ue=s[4])?(at(),Re(y,1,1,Ge),Qe(),y=je(s),y.c(),Oe(y,1),y.m(L,null)):y.p(s,f)},i(s){J||(Oe(y),J=!0)},o(s){Re(y),J=!1},d(s){s&&(S(a),S(H),S(L)),We(o,s),y.d(s),oe=!1,Xe(de)}}}function rt(i,a,l){let u,d,h;const P={fungal:{branchingChance:.29,directionRandomness:2,branchAngle:Math.PI/1.4,downwardBias:.01},leaf:{branchingChance:.2,directionRandomness:.2,branchAngle:Math.PI/1.4,downwardBias:.01},chaos:{branchingChance:2,directionRandomness:7,branchAngle:Math.PI/1.4,downwardBias:.01},covid:{branchingChance:9,directionRandomness:200,branchAngle:Math.PI/1.4,downwardBias:.01},root:{branchingChance:6,directionRandomness:1,branchAngle:Math.PI/1.5,downwardBias:10}};let M=[];qe(async()=>{const e=await nt("parsed.csv");l(7,M=e.map(p=>({...p,KeywordMatch:typeof p.KeywordMatch=="string"?p.KeywordMatch.replace(/[\[\]'"]/g,"").split(/[,;]/).map(I=>I.trim()).filter(Boolean):[],Text:p.Text||""})))});let W="",C="",te="chaos";function B(){l(4,u+=1)}function ge(){return P[te]||P.fungal}let R=e=>{const me=.44999999999999996,O=100*.75,he=.01*.75,b=.05,ve=1,K=8*.75,se=new Map,ae={};let ne=[],q={x:0,y:0},H=1,L=!1,ue=0,J=0,oe=0,de={x:0,y:0},N={left:0,right:0,top:0,bottom:0},o,y=new Map;function s(t,n,v,A){const r=ge();let w=t.dir0.copy();w.y+=r.downwardBias,w.normalize();let T=A.noise(n.x*he,n.y*he,v*b);return w.rotate(A.map(T,0,1,-r.directionRandomness,r.directionRandomness)),w}function f(t,n,v){const A=`${t}_${n}_${v}`;if(se.has(A))return se.get(A);const r=e.createGraphics(40*.75,40*.75);r.colorMode(e.HSB),r.textFont("courier"),r.textAlign(e.CENTER,e.CENTER),r.textSize(v);const w=Math.max(r.textWidth(n),4);return r.noStroke(),r.fill(ae[t]||e.color(0,0,60)),r.rectMode(e.CENTER),r.rect(r.width/2,r.height/2,w+4,v+4),r.fill(0,0,0),r.text(n,r.width/2,r.height/2),se.set(A,r),r}function g(t,n,v){var z,Z,we,Ce,xe,Me,Ee,ke,pe,be,Ke;const A=n/2,r=v/2,w=Array.from(new Set(t.flatMap(c=>Array.isArray(c.KeywordMatch)?c.KeywordMatch:[]).filter(Boolean)));w.forEach((c,V)=>{let m=60+V*180/Math.max(w.length-1,1);ae[c]=e.color(0,0,m)});let T=[];if(!t.length)return T;function U(c,V=300){if(!c)return"";if(c.length<=V)return c;let m=c.lastIndexOf(" ",V);return m===-1&&(m=V),c.slice(0,m)+"…"}function Q(c,V,m=200){if(!c||!V)return U(c,m);const F=c.toLowerCase().indexOf(V.toLowerCase());if(F===-1)return U(c,m);let D=Math.max(0,F-Math.floor((m-V.length)/2)),Y=D+m;if(Y>c.length&&(Y=c.length,D=Math.max(0,Y-m)),D>0){const re=c.lastIndexOf(" ",D);re!==-1&&(D=re+1)}if(Y<c.length){const re=c.indexOf(" ",Y);re!==-1&&(Y=re)}let le=c.slice(D,Y);return D>0&&(le="…"+le),Y<c.length&&(le=le+"…"),le}let $=((Z=(z=t[0])==null?void 0:z.KeywordMatch)==null?void 0:Z[0])||"",j=Q(((we=t[0])==null?void 0:we.Text)??((Ce=t[0])==null?void 0:Ce.sentence)??"",$);T.push({kw:((Me=(xe=t[0])==null?void 0:xe.KeywordMatch)==null?void 0:Me[0])||"",nodes:[e.createVector(A,r)],sentence:j,maxSteps:Math.ceil(j.length*(K/6)),grown:0,frameCount:0,dir0:e.createVector(0,-1).normalize(),pathLength:0,distArr:[0],lastPlacedCharIndex:-1,finished:!1,parent:null,attachAt:0});for(let c=1;c<t.length;c++){let V=Math.floor(Math.random()*Math.max(1,c)),m=T[V],F=Math.floor(2+Math.random()*Math.max(1,m.nodes.length-8));F=Math.max(1,Math.min(F,m.nodes.length-3));let D=m.nodes[F]||m.nodes[m.nodes.length-1],Y=m.nodes[F+1]?e.createVector(m.nodes[F+1].x-m.nodes[F].x,m.nodes[F+1].y-m.nodes[F].y).normalize():e.createVector(0,-1),le=(Math.random()-.5)*Math.PI/1.2;Y.rotate(le);let re=((ke=(Ee=t[c])==null?void 0:Ee.KeywordMatch)==null?void 0:ke[0])||"",Le=Q(((pe=t[c])==null?void 0:pe.Text)??((be=t[c])==null?void 0:be.sentence)??"",re);T.push({kw:((Ke=t[c].KeywordMatch)==null?void 0:Ke[0])||"",nodes:[D.copy()],sentence:Le,maxSteps:Math.ceil(Le.length*(K/6)),grown:0,frameCount:0,dir0:Y,pathLength:0,distArr:[0],lastPlacedCharIndex:-1,finished:!1,parent:V,attachAt:F})}return T}e.setup=()=>{if(e.createCanvas(window.innerWidth,window.innerHeight),e.colorMode(e.HSB),e.textAlign(e.CENTER,e.CENTER),e.textSize(9*.75),e.frameRate(30),!h||!h.length){o=null;return}const t=4200*.75,n=4200*.75;de={x:t/2,y:n/2},N={left:0,right:t,top:0,bottom:n},o=e.createGraphics(t,n),o.colorMode(e.HSB),o.textAlign(e.CENTER,e.CENTER),o.textFont("courier"),o.textSize(13*.75),ne=g(h,t,n),H=1,q={x:0,y:0},oe=0,e.random([.1,.2,.3,.4,.5,1])},e.draw=()=>{if(!o){e.background(0);return}y=new Map,ne.forEach(t=>t.nodes.forEach(n=>{if(!n)return;const v=`${Math.floor(n.x/O)},${Math.floor(n.y/O)}`;y.has(v)||y.set(v,[]),y.get(v).push(n)})),ge(),ne.forEach(t=>{if(t.finished||(t.frameCount++,t.frameCount%ve!==0||t.grown>=t.maxSteps))return;const n=t.nodes&&t.nodes[t.nodes.length-1];if(!n)return;let v=s(t,n,oe,e);const[A,r]=[Math.floor(n.x/O),Math.floor(n.y/O)];for(let Q=-1;Q<=1;Q++)for(let $=-1;$<=1;$++)(y.get(`${A+Q},${r+$}`)||[]).forEach(j=>{if(!j)return;const z=n.dist(j);z>0&&z<9&&v.add(e.createVector(n.x-j.x,n.y-j.y).normalize().mult(me))});v.normalize();const w=e.Vector.add(n,e.Vector.mult(v,6));w.x=e.constrain(w.x,N.left+10*.75,N.right-10*.75),w.y=e.constrain(w.y,N.top+10*.75,N.bottom-10*.75),t.nodes.push(w),t.grown++;const T=n.dist(w);t.pathLength+=T,t.distArr.push(t.pathLength);let U=t.lastPlacedCharIndex+1;for(;U<t.sentence.length&&(U+.5)*K<t.pathLength;){const Q=(U+.5)*K,$=t.distArr.findIndex(j=>j>=Q);if($>0){const j=t.distArr[$-1],z=t.nodes[$-1],Z=t.nodes[$];if(!z||!Z)break;const we=(Q-j)/Z.dist(z),Ce=e.lerp(z.x,Z.x,we),xe=e.lerp(z.y,Z.y,we),Me=e.atan2(Z.y-z.y,Z.x-z.x),Ee=t.sentence[U],ke=9/1.2,pe=f(t.kw,Ee,ke);pe&&(o.push(),o.translate(Ce,xe),o.rotate(Me),o.imageMode(e.CENTER),o.image(pe,0,-6),o.pop()),t.lastPlacedCharIndex=U,U++}else break}t.grown>=t.maxSteps&&(t.finished=!0)}),oe++,e.background(0),e.push(),e.translate(e.width/2,e.height/2),e.scale(H),e.translate(q.x,q.y),o&&e.image(o,-de.x,-de.y),e.pop()},e.mousePressed=()=>{L=!0,ue=e.mouseX,J=e.mouseY},e.mouseReleased=()=>{L=!1},e.mouseDragged=()=>{if(L){const t=(e.mouseX-ue)/H,n=(e.mouseY-J)/H;q.x+=t,q.y+=n,ue=e.mouseX,J=e.mouseY}},e.mouseWheel=t=>{const n=t.deltaY<0?1.05:.9523809523809523;return H=e.constrain(H*n,.5,2),!1},e.windowResized=()=>{e.resizeCanvas(window.innerWidth,window.innerHeight)}};function ye(){te=ze(this),l(2,te)}function _e(){W=ze(this),l(0,W),l(5,d),l(7,M)}function X(){C=this.value,l(1,C)}return i.$$.update=()=>{i.$$.dirty&131&&l(3,h=M.filter(e=>!(W&&!(e.KeywordMatch||[]).includes(W)||C&&!(e.Text||"").toLowerCase().includes(C.toLowerCase()))).reverse().slice(0,200)),i.$$.dirty&15&&l(4,u=`${W}|${C}|${te}|${h.length}`),i.$$.dirty&128&&l(5,d=Array.from(new Set(M.flatMap(e=>Array.isArray(e.KeywordMatch)?e.KeywordMatch:[]))).sort())},B(),[W,C,te,h,u,d,R,M,ye,_e,X]}class ft extends Je{constructor(a){super(),Ue(this,a,rt,lt,Ye,{})}}export{ft as component,dt as universal};
