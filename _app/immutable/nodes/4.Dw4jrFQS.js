import{s as oe,n as V,d as te,o as pe}from"../chunks/CArxwV3n.js";import{S as fe,i as ue,d,b as A,m as h,e as L,f as b,j as O,n as ge,z as ne,c as _,A as y,B as w,q as ae,s as U,g as C,h as D,k as K,l as T,u as M,t as N,a as P,w as F,x as G,v as q}from"../chunks/B_uZpV_5.js";import{e as J,f as ve,a as he,D as $e,K as Ee,G as be,T as xe,c as ye}from"../chunks/BKglG_9v.js";const we=!0,Ne=Object.freeze(Object.defineProperty({__proto__:null,prerender:we},Symbol.toStringTag,{value:"Module"}));function re(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function se(l,e,n){const t=l.slice();return t[11]=e[n],t[10]=n,t}function ke(l){let e,n,t,o,i=J(l[1]),s=[];for(let r=0;r<i.length;r+=1)s[r]=le(se(l,i,r));let u=J(l[0]),c=[];for(let r=0;r<u.length;r+=1)c[r]=ie(re(l,u,r));return{c(){e=O("div"),n=w("svg"),t=w("g");for(let r=0;r<s.length;r+=1)s[r].c();o=w("g");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=L(r,"DIV",{class:!0});var g=b(e);n=y(g,"svg",{width:!0,height:!0});var a=b(n);t=y(a,"g",{class:!0});var m=b(t);for(let f=0;f<s.length;f+=1)s[f].l(m);m.forEach(d),o=y(a,"g",{});var E=b(o);for(let f=0;f<c.length;f+=1)c[f].l(E);E.forEach(d),a.forEach(d),g.forEach(d),this.h()},h(){h(t,"class","dates"),h(n,"width",me+2500),h(n,"height",l[2]),h(e,"class","timeline-container svelte-amoc3j")},m(r,g){A(r,e,g),_(e,n),_(n,t);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(t,null);_(n,o);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(o,null)},p(r,g){if(g&14){i=J(r[1]);let a;for(a=0;a<i.length;a+=1){const m=se(r,i,a);s[a]?s[a].p(m,g):(s[a]=le(m),s[a].c(),s[a].m(t,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=i.length}if(g&9){u=J(r[0]);let a;for(a=0;a<u.length;a+=1){const m=re(r,u,a);c[a]?c[a].p(m,g):(c[a]=ie(m),c[a].c(),c[a].m(o,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=u.length}g&4&&h(n,"height",r[2])},d(r){r&&d(e),ne(s,r),ne(c,r)}}}function De(l){let e,n="Loading snippets…";return{c(){e=O("p"),e.textContent=n},l(t){e=L(t,"P",{"data-svelte-h":!0}),ge(e)!=="svelte-tsh39c"&&(e.textContent=n)},m(t,o){A(t,e,o)},p:V,d(t){t&&d(e)}}}function Te(l){let e,n=W(l[11])+"",t,o,i,s,u;return{c(){e=w("text"),t=K(n),i=w("line"),this.h()},l(c){e=y(c,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var r=b(e);t=C(r,n),r.forEach(d),i=y(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),b(i).forEach(d),this.h()},h(){h(e,"class","date svelte-amoc3j"),h(e,"x",o=l[3](l[11])),h(e,"y","20"),h(e,"text-anchor","left"),h(i,"x1",s=l[3](l[11])),h(i,"y1","24"),h(i,"x2",u=l[3](l[11])),h(i,"y2",l[2]),h(i,"class","svelte-amoc3j")},m(c,r){A(c,e,r),_(e,t),A(c,i,r)},p(c,r){r&2&&n!==(n=W(c[11])+"")&&U(t,n),r&2&&o!==(o=c[3](c[11]))&&h(e,"x",o),r&2&&s!==(s=c[3](c[11]))&&h(i,"x1",s),r&2&&u!==(u=c[3](c[11]))&&h(i,"x2",u),r&4&&h(i,"y2",c[2])},d(c){c&&(d(e),d(i))}}}function le(l){let e,n=l[10]%ce===0&&Te(l);return{c(){n&&n.c(),e=ae()},l(t){n&&n.l(t),e=ae()},m(t,o){n&&n.m(t,o),A(t,e,o)},p(t,o){t[10]%ce===0&&n.p(t,o)},d(t){t&&d(e),n&&n.d(t)}}}function ie(l){let e,n,t=l[8].before+"",o,i,s,u=l[8].match+"",c,r,g,a,m=l[8].after+"",E,f,p,v,k=W(l[8].date)+"",j,I,R,z,B,H;return{c(){e=w("text"),n=w("tspan"),o=K(t),i=T(),s=w("tspan"),c=K(u),g=T(),a=w("tspan"),E=K(m),f=T(),p=w("a"),v=w("tspan"),j=K(k),I=K(" ↗"),R=T(),this.h()},l(x){e=y(x,"text",{x:!0,y:!0,opacity:!0});var $=b(e);n=y($,"tspan",{class:!0});var Y=b(n);o=C(Y,t),Y.forEach(d),i=D($),s=y($,"tspan",{class:!0,fill:!0});var Z=b(s);c=C(Z,u),Z.forEach(d),g=D($),a=y($,"tspan",{class:!0});var ee=b(a);E=C(ee,m),ee.forEach(d),f=D($),p=y($,"a",{href:!0,target:!0,class:!0});var Q=b(p);v=y(Q,"tspan",{class:!0,dx:!0});var X=b(v);j=C(X,k),I=C(X," ↗"),X.forEach(d),R=D(Q),Q.forEach(d),$.forEach(d),this.h()},h(){h(n,"class","text svelte-amoc3j"),h(s,"class","highlight svelte-amoc3j"),h(s,"fill",r=l[8].visible?"blue":"#999"),h(a,"class","text svelte-amoc3j"),h(v,"class","date svelte-amoc3j"),h(v,"dx","1"),h(p,"href",z=l[8].url),h(p,"target","_blank"),h(p,"class","svelte-amoc3j"),h(e,"x",B=l[3](l[8].date)),h(e,"y",de+l[10]*_e),h(e,"opacity",H=l[8].visible?1:.2)},m(x,$){A(x,e,$),_(e,n),_(n,o),_(e,i),_(e,s),_(s,c),_(e,g),_(e,a),_(a,E),_(e,f),_(e,p),_(p,v),_(v,j),_(v,I),_(p,R)},p(x,$){$&1&&t!==(t=x[8].before+"")&&U(o,t),$&1&&u!==(u=x[8].match+"")&&U(c,u),$&1&&r!==(r=x[8].visible?"blue":"#999")&&h(s,"fill",r),$&1&&m!==(m=x[8].after+"")&&U(E,m),$&1&&k!==(k=W(x[8].date)+"")&&U(j,k),$&1&&z!==(z=x[8].url)&&h(p,"href",z),$&1&&B!==(B=x[3](x[8].date))&&h(e,"x",B),$&1&&H!==(H=x[8].visible?1:.2)&&h(e,"opacity",H)},d(x){x&&d(e)}}}function Ae(l){let e;function n(i,s){return i[0].length?ke:De}let t=n(l),o=t(l);return{c(){e=O("section"),o.c(),this.h()},l(i){e=L(i,"SECTION",{class:!0});var s=b(e);o.l(s),s.forEach(d),this.h()},h(){h(e,"class","svelte-amoc3j")},m(i,s){A(i,e,s),o.m(e,null)},p(i,[s]){t===(t=n(i))&&o?o.p(i,s):(o.d(1),o=t(i),o&&(o.c(),o.m(e,null)))},i:V,o:V,d(i){i&&d(e),o.d()}}}const me=2e3,_e=24,ce=10,de=40;function Se(l,e="00:00"){const[n,t,o]=l.split("."),[i="00",s="00"]=e.split(":");return new Date(+o,+t-1,+n,+i,+s)}function W(l){return l.toLocaleDateString("de-DE",{day:"numeric",month:"long",year:"numeric"})}function je(l,e){const n=l.match(/[^\.!?]+[\.!?]+/g)||[l],t=n.find(u=>e.some(c=>new RegExp(`\\b${c}\\b`,"i").test(u)))||n[0],o=e.find(u=>new RegExp(`\\b${u}\\b`,"i").test(t));if(!o)return{before:t,match:"",after:""};const i=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=t.match(new RegExp(`(.*?)(${i})(.*)`,"i"))||[];return{before:s[1]||"",match:s[2]||o,after:s[3]||""}}function Ce(l,e,n){let t,o;te(l,ve,a=>n(5,t=a)),te(l,he,a=>n(6,o=a));let i=[],s=[],u=null,c=null,r=0;function g(a){return!u||!c||c-u===0?0:(c-a)/(c-u)*me}return l.$$.update=()=>{if(l.$$.dirty&115){const a=o,m=new Set(t.map(E=>`${E.ExtractedDate}|${E.ExtractedTime[0]}|${E.URL}`));if(Array.isArray(a)&&a.length){n(0,i=a.map(f=>{const p=f.KeywordExtracted||[],{before:v,match:k,after:j}=je(f.Text,p),I=Se(f.ExtractedDate,f.ExtractedTime[0]),R=`${f.ExtractedDate}|${f.ExtractedTime[0]}|${f.URL}`;return{date:I,before:v,match:k,after:j,url:f.URL,visible:m.has(R)}}).sort((f,p)=>p.date-f.date));const E=i.map(f=>f.date.getTime());n(1,s=Array.from(new Set(E)).sort((f,p)=>f-p).map(f=>new Date(f))),u||(n(4,u=s[0]),c=s[s.length-1]),n(2,r=de+i.length*_e+40)}}},[i,s,r,g,u,t,o]}class Ke extends fe{constructor(e){super(),ue(this,e,Ce,Ae,oe,{})}}function Le(l){let e,n,t,o,i,s,u,c,r,g,a,m,E;return t=new $e({}),i=new Ee({}),u=new be({}),r=new xe({}),m=new Ke({}),{c(){e=O("main"),n=O("section"),q(t.$$.fragment),o=T(),q(i.$$.fragment),s=T(),q(u.$$.fragment),c=T(),q(r.$$.fragment),g=T(),a=O("section"),q(m.$$.fragment),this.h()},l(f){e=L(f,"MAIN",{});var p=b(e);n=L(p,"SECTION",{class:!0});var v=b(n);G(t.$$.fragment,v),o=D(v),G(i.$$.fragment,v),s=D(v),G(u.$$.fragment,v),c=D(v),G(r.$$.fragment,v),v.forEach(d),g=D(p),a=L(p,"SECTION",{class:!0});var k=b(a);G(m.$$.fragment,k),k.forEach(d),p.forEach(d),this.h()},h(){h(n,"class","filters"),h(a,"class","timeline-wrapper")},m(f,p){A(f,e,p),_(e,n),F(t,n,null),_(n,o),F(i,n,null),_(n,s),F(u,n,null),_(n,c),F(r,n,null),_(e,g),_(e,a),F(m,a,null),E=!0},p:V,i(f){E||(P(t.$$.fragment,f),P(i.$$.fragment,f),P(u.$$.fragment,f),P(r.$$.fragment,f),P(m.$$.fragment,f),E=!0)},o(f){N(t.$$.fragment,f),N(i.$$.fragment,f),N(u.$$.fragment,f),N(r.$$.fragment,f),N(m.$$.fragment,f),E=!1},d(f){f&&d(e),M(t),M(i),M(u),M(r),M(m)}}}function S(l){if(!l)return[];try{const e=JSON.parse(l.replace(/'/g,'"'));return Array.isArray(e)?e:[]}catch{return l.split(/[,;]\s*/).filter(Boolean)}}function Oe(l){return pe(async()=>{const n=(await ye("parsed.csv")).map(t=>{const o=S(t.KeywordMatch),i=S(t.KeywordExtracted),s=S(t.ExtractedTime),u=S(t.ExtractedAge),c=S(t.ExtractedGender),r=S(t.ExtractedAction),a=S(t.ExtractedDistrict)[0]||t.Location||"";return{...t,KeywordMatch:o,KeywordExtracted:i,ExtractedTime:s,ExtractedAge:u,ExtractedGender:c,ExtractedAction:r,ExtractedDistrict:a,ExtractedDate:t.ExtractedDate||t.Date}});he.set(n)}),[]}class Pe extends fe{constructor(e){super(),ue(this,e,Oe,Le,oe,{})}}export{Pe as component,Ne as universal};
