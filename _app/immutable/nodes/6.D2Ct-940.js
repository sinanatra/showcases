import{s as oe,n as Z,d as $,i as C,b as u,f as P,h as k,j,y as te,F as pe,G as ne,q as E,H as D,I as A,z as re,p as W,t as F,v as B,w as G,x as M,o as ge}from"../chunks/B6S3n0LM.js";import{S as fe,i as ue,d as q,t as z,a as H,m as U,e as V,b as J}from"../chunks/AETkSAWP.js";import{e as Y,f as ve,a as he,D as Ee,K as $e,G as be,T as ye,c as xe}from"../chunks/B2fBup7n.js";const we=!0,Re=Object.freeze(Object.defineProperty({__proto__:null,prerender:we},Symbol.toStringTag,{value:"Module"}));function ae(s,e,n){const t=s.slice();return t[13]=e[n],t[15]=n,t}function se(s,e,n){const t=s.slice();return t[16]=e[n],t[15]=n,t}function ke(s){let e,n,t,f,i=Y(s[1]),c=[];for(let r=0;r<i.length;r+=1)c[r]=le(se(s,i,r));let h=Y(s[0]),o=[];for(let r=0;r<h.length;r+=1)o[r]=ie(ae(s,h,r));return{c(){e=j("div"),n=A("svg"),t=A("g");for(let r=0;r<c.length;r+=1)c[r].c();f=A("g");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=P(r,"DIV",{class:!0});var b=k(e);n=D(b,"svg",{width:!0,height:!0});var a=k(n);t=D(a,"g",{class:!0});var v=k(t);for(let _=0;_<c.length;_+=1)c[_].l(v);v.forEach($),f=D(a,"g",{});var O=k(f);for(let _=0;_<o.length;_+=1)o[_].l(O);O.forEach($),a.forEach($),b.forEach($),this.h()},h(){u(t,"class","dates"),u(n,"width",me+2500),u(n,"height",s[2]),u(e,"class","timeline-container svelte-15m7ntv")},m(r,b){C(r,e,b),E(e,n),E(n,t);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(t,null);E(n,f);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(f,null)},p(r,b){if(b&14){i=Y(r[1]);let a;for(a=0;a<i.length;a+=1){const v=se(r,i,a);c[a]?c[a].p(v,b):(c[a]=le(v),c[a].c(),c[a].m(t,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=i.length}if(b&9){h=Y(r[0]);let a;for(a=0;a<h.length;a+=1){const v=ae(r,h,a);o[a]?o[a].p(v,b):(o[a]=ie(v),o[a].c(),o[a].m(f,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=h.length}b&4&&u(n,"height",r[2])},d(r){r&&$(e),ne(c,r),ne(o,r)}}}function Oe(s){let e,n="Loading snippets…";return{c(){e=j("p"),e.textContent=n},l(t){e=P(t,"P",{"data-svelte-h":!0}),pe(e)!=="svelte-tsh39c"&&(e.textContent=n)},m(t,f){C(t,e,f)},p:Z,d(t){t&&$(e)}}}function De(s){let e,n=ee(s[16])+"",t,f,i,c,h;return{c(){e=A("text"),t=G(n),i=A("line"),this.h()},l(o){e=D(o,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var r=k(e);t=F(r,n),r.forEach($),i=D(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),k(i).forEach($),this.h()},h(){u(e,"class","date svelte-15m7ntv"),u(e,"x",f=s[3](s[16])),u(e,"y","20"),u(e,"text-anchor","left"),u(i,"x1",c=s[3](s[16])),u(i,"y1","24"),u(i,"x2",h=s[3](s[16])),u(i,"y2",s[2]),u(i,"class","svelte-15m7ntv")},m(o,r){C(o,e,r),E(e,t),C(o,i,r)},p(o,r){r&2&&n!==(n=ee(o[16])+"")&&W(t,n),r&2&&f!==(f=o[3](o[16]))&&u(e,"x",f),r&2&&c!==(c=o[3](o[16]))&&u(i,"x1",c),r&2&&h!==(h=o[3](o[16]))&&u(i,"x2",h),r&4&&u(i,"y2",o[2])},d(o){o&&($(e),$(i))}}}function le(s){let e,n=s[15]%ce===0&&De(s);return{c(){n&&n.c(),e=re()},l(t){n&&n.l(t),e=re()},m(t,f){n&&n.m(t,f),C(t,e,f)},p(t,f){t[15]%ce===0&&n.p(t,f)},d(t){t&&$(e),n&&n.d(t)}}}function ie(s){let e,n,t=s[13].before+"",f,i,c,h=s[13].match+"",o,r,b,a,v=s[13].after+"",O,_,y,l,p=ee(s[13].date)+"",m,d,w,I,S,T;return{c(){e=A("text"),n=A("tspan"),f=G(t),i=M(),c=A("tspan"),o=G(h),b=M(),a=A("tspan"),O=G(v),_=M(),y=A("a"),l=A("tspan"),m=G(p),d=G(" ↗"),w=M(),this.h()},l(x){e=D(x,"text",{x:!0,y:!0,opacity:!0});var g=k(e);n=D(g,"tspan",{class:!0});var K=k(n);f=F(K,t),K.forEach($),i=B(g),c=D(g,"tspan",{class:!0,fill:!0});var R=k(c);o=F(R,h),R.forEach($),b=B(g),a=D(g,"tspan",{class:!0});var Q=k(a);O=F(Q,v),Q.forEach($),_=B(g),y=D(g,"a",{href:!0,target:!0,class:!0});var X=k(y);l=D(X,"tspan",{class:!0,dx:!0});var L=k(l);m=F(L,p),d=F(L," ↗"),L.forEach($),w=B(X),X.forEach($),g.forEach($),this.h()},h(){u(n,"class","text svelte-15m7ntv"),u(c,"class","highlight"),u(c,"fill",r=s[13].visible?"var(--color-1)":"#999"),u(a,"class","text svelte-15m7ntv"),u(l,"class","date svelte-15m7ntv"),u(l,"dx","2"),u(y,"href",I=s[13].url),u(y,"target","_blank"),u(y,"class","svelte-15m7ntv"),u(e,"x",S=s[3](s[13].date)),u(e,"y",_e+s[15]*de),u(e,"opacity",T=s[13].visible?1:.2)},m(x,g){C(x,e,g),E(e,n),E(n,f),E(e,i),E(e,c),E(c,o),E(e,b),E(e,a),E(a,O),E(e,_),E(e,y),E(y,l),E(l,m),E(l,d),E(y,w)},p(x,g){g&1&&t!==(t=x[13].before+"")&&W(f,t),g&1&&h!==(h=x[13].match+"")&&W(o,h),g&1&&r!==(r=x[13].visible?"var(--color-1)":"#999")&&u(c,"fill",r),g&1&&v!==(v=x[13].after+"")&&W(O,v),g&1&&p!==(p=ee(x[13].date)+"")&&W(m,p),g&1&&I!==(I=x[13].url)&&u(y,"href",I),g&1&&S!==(S=x[3](x[13].date))&&u(e,"x",S),g&1&&T!==(T=x[13].visible?1:.2)&&u(e,"opacity",T)},d(x){x&&$(e)}}}function Ae(s){let e;function n(i,c){return i[0].length?ke:Oe}let t=n(s),f=t(s);return{c(){e=j("section"),f.c(),this.h()},l(i){e=P(i,"SECTION",{class:!0});var c=k(e);f.l(c),c.forEach($),this.h()},h(){u(e,"class","svelte-15m7ntv")},m(i,c){C(i,e,c),f.m(e,null)},p(i,[c]){t===(t=n(i))&&f?f.p(i,c):(f.d(1),f=t(i),f&&(f.c(),f.m(e,null)))},i:Z,o:Z,d(i){i&&$(e),f.d()}}}const me=2e3,de=24,ce=80,_e=40;function Ie(s,e="00:00"){const[n,t,f]=s.split("."),[i="00",c="00"]=e.split(":");return new Date(+f,+t-1,+n,+i,+c)}function Se(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(s){return s.toLocaleDateString("de-DE",{day:"numeric",month:"long",year:"numeric"})}function Te(s,e,n){let t,f;te(s,ve,l=>n(5,t=l)),te(s,he,l=>n(6,f=l));let i=[],c=[],h=null,o=null,r=0;const b=["Nr","Dr","z.B","etc","u.a"];function a(l,p){for(const m of b)if(l.slice(p-m.length,p)===m)return!0;return!1}function v(l,p){let m=Math.max(l.lastIndexOf(".",p-1),l.lastIndexOf("!",p-1),l.lastIndexOf("?",p-1));for(;m>-1&&l[m]==="."&&a(l,m);)m=Math.max(l.lastIndexOf(".",m-1),l.lastIndexOf("!",m-1),l.lastIndexOf("?",m-1));return m}function O(l,p){let m=[l.indexOf(".",p),l.indexOf("!",p),l.indexOf("?",p)].filter(w=>w>=0),d=m.length?Math.min(...m):-1;for(;d>-1&&l[d]==="."&&a(l,d);)m=[l.indexOf(".",d+1),l.indexOf("!",d+1),l.indexOf("?",d+1)].filter(w=>w>=0),d=m.length?Math.min(...m):-1;return d}function _(l,p){if(!p||!p.length)return{before:l.slice(0,200),match:"",after:""};let m=null,d="";for(const R of p){const Q=Se(R),L=new RegExp(`\\b${Q}\\b`,"i").exec(l);if(L){m=L,d=L[0];break}}if(!m)return{before:l.slice(0,200),match:"",after:""};const w=m.index,I=d.length,S=v(l,w),T=O(l,w+I),x=T>-1?T:l.length-1,g=l.slice(S+1,x+1),K=w-(S+1);return{before:g.slice(0,K),match:g.slice(K,K+I),after:g.slice(K+I)}}function y(l){return!h||!o||o-h===0?0:(o-l)/(o-h)*me}return s.$$.update=()=>{if(s.$$.dirty&115){const l=f,p=new Set(t.map(m=>`${m.ExtractedDate}|${m.ExtractedTime[0]}|${m.URL}`));if(Array.isArray(l)&&l.length){n(0,i=l.map(d=>{const w=d.KeywordExtracted||[],{before:I,match:S,after:T}=_(d.Text,w),x=Ie(d.ExtractedDate,d.ExtractedTime[0]),g=`${d.ExtractedDate}|${d.ExtractedTime[0]}|${d.URL}`;return{date:x,before:I,match:S,after:T,url:d.URL,visible:p.has(g)}}).sort((d,w)=>w.date-d.date));const m=i.map(d=>d.date.getTime());n(1,c=Array.from(new Set(m)).sort((d,w)=>d-w).map(d=>new Date(d))),h||(n(4,h=c[0]),o=c[c.length-1]),n(2,r=_e+i.length*de+40)}}},[i,c,r,y,h,t,f]}class Be extends fe{constructor(e){super(),ue(this,e,Te,Ae,oe,{})}}function Me(s){let e,n,t,f,i,c,h,o,r,b,a,v,O;return t=new Ee({}),i=new $e({}),h=new be({}),r=new ye({}),v=new Be({}),{c(){e=j("main"),n=j("section"),J(t.$$.fragment),f=M(),J(i.$$.fragment),c=M(),J(h.$$.fragment),o=M(),J(r.$$.fragment),b=M(),a=j("section"),J(v.$$.fragment),this.h()},l(_){e=P(_,"MAIN",{});var y=k(e);n=P(y,"SECTION",{class:!0});var l=k(n);V(t.$$.fragment,l),f=B(l),V(i.$$.fragment,l),c=B(l),V(h.$$.fragment,l),o=B(l),V(r.$$.fragment,l),l.forEach($),b=B(y),a=P(y,"SECTION",{class:!0});var p=k(a);V(v.$$.fragment,p),p.forEach($),y.forEach($),this.h()},h(){u(n,"class","filters"),u(a,"class","timeline-wrapper")},m(_,y){C(_,e,y),E(e,n),U(t,n,null),E(n,f),U(i,n,null),E(n,c),U(h,n,null),E(n,o),U(r,n,null),E(e,b),E(e,a),U(v,a,null),O=!0},p:Z,i(_){O||(H(t.$$.fragment,_),H(i.$$.fragment,_),H(h.$$.fragment,_),H(r.$$.fragment,_),H(v.$$.fragment,_),O=!0)},o(_){z(t.$$.fragment,_),z(i.$$.fragment,_),z(h.$$.fragment,_),z(r.$$.fragment,_),z(v.$$.fragment,_),O=!1},d(_){_&&$(e),q(t),q(i),q(h),q(r),q(v)}}}function N(s){if(!s)return[];try{const e=JSON.parse(s.replace(/'/g,'"'));return Array.isArray(e)?e:[]}catch{return s.split(/[,;]\s*/).filter(Boolean)}}function Ce(s){return ge(async()=>{const n=(await xe("parsed.csv")).map(t=>{const f=N(t.KeywordMatch),i=N(t.KeywordExtracted),c=N(t.ExtractedTime),h=N(t.ExtractedAge),o=N(t.ExtractedGender),r=N(t.ExtractedAction),a=N(t.ExtractedDistrict)[0]||t.Location||"";return{...t,KeywordMatch:f,KeywordExtracted:i,ExtractedTime:c,ExtractedAge:h,ExtractedGender:o,ExtractedAction:r,ExtractedDistrict:a,ExtractedDate:t.ExtractedDate||t.Date}});he.set(n)}),[]}class Fe extends fe{constructor(e){super(),ue(this,e,Ce,Me,oe,{})}}export{Fe as component,Re as universal};
