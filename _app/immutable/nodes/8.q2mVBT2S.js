import{s as _e,n as F,d as T,r as kt,p as ke,i as z,q as C,G as Be,b as B,f as A,h as j,t as V,v as re,j as D,w as U,x as se,y as ge,o as at,F as Mt,Y as Ze,Z as Oe,H as Xe,z as Me,D as H,W as ct,X as ft}from"../chunks/jds0Hg19.js";import{S as Ie,i as Ae,d as Te,t as Q,a as $,g as ht,c as ut,m as Ee,e as Ce,b as be}from"../chunks/BqteK-Fr.js";import{c as Tt}from"../chunks/CKvn6CDR.js";import{b as oe,d as Et,h as dt,a as Ct}from"../chunks/B3XFfl3_.js";import{e as Je}from"../chunks/D6YF6ztN.js";import{P as bt}from"../chunks/BnHmvMf4.js";const xt=!0,Zt=Object.freeze(Object.defineProperty({__proto__:null,prerender:xt},Symbol.toStringTag,{value:"Module"}));function Qe(o,e,t){const n=o.slice();return n[13]=e[t],n}function $e(o){let e,t,n,r="any",l,f,d,u=Je(o[0]),h=[];for(let a=0;a<u.length;a+=1)h[a]=et(Qe(o,u,a));return{c(){e=U(`mentioning:
    `),t=D("select"),n=D("option"),n.textContent=r;for(let a=0;a<h.length;a+=1)h[a].c();this.h()},l(a){e=V(a,`mentioning:
    `),t=A(a,"SELECT",{class:!0});var m=j(t);n=A(m,"OPTION",{"data-svelte-h":!0}),Xe(n)!=="svelte-6v9hii"&&(n.textContent=r);for(let c=0;c<h.length;c+=1)h[c].l(m);m.forEach(T),this.h()},h(){n.__value="",Oe(n,n.__value),B(t,"class","svelte-1vulii5")},m(a,m){z(a,e,m),z(a,t,m),C(t,n);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(t,null);Ze(t,o[2].keyword),f||(d=Be(t,"change",o[6]),f=!0)},p(a,m){if(m&1){u=Je(a[0]);let c;for(c=0;c<u.length;c+=1){const y=Qe(a,u,c);h[c]?h[c].p(y,m):(h[c]=et(y),h[c].c(),h[c].m(t,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=u.length}m&5&&l!==(l=a[2].keyword)&&Ze(t,a[2].keyword)},d(a){a&&(T(e),T(t)),Mt(h,a),f=!1,d()}}}function et(o){let e,t=o[13]+"",n,r;return{c(){e=D("option"),n=U(t),this.h()},l(l){e=A(l,"OPTION",{});var f=j(e);n=V(f,t),f.forEach(T),this.h()},h(){e.__value=r=o[13],Oe(e,e.__value)},m(l,f){z(l,e,f),C(e,n)},p(l,f){f&1&&t!==(t=l[13]+"")&&ke(n,t),f&1&&r!==(r=l[13])&&(e.__value=r,Oe(e,e.__value))},d(l){l&&T(e)}}}function It(o){let e,t,n,r=o[1].length+"",l,f,d=o[1].length===1?"":"s",u,h,a,m,c,y,x,p,w,b,s,S,E=o[0].length&&$e(o);return{c(){e=D("div"),t=U(`Showing the last
  `),n=D("strong"),l=U(r),f=U(`
  police reports `),u=U(d),h=se(),E&&E.c(),a=U(`
  , containing
  `),m=D("input"),y=U(`
  , or
  `),x=D("label"),p=D("input"),b=U(`
    only the latest.`),this.h()},l(_){e=A(_,"DIV",{class:!0});var k=j(e);t=V(k,`Showing the last
  `),n=A(k,"STRONG",{class:!0});var ee=j(n);l=V(ee,r),ee.forEach(T),f=V(k,`
  police reports `),u=V(k,d),h=re(k),E&&E.l(k),a=V(k,`
  , containing
  `),m=A(k,"INPUT",{type:!0,placeholder:!0,class:!0}),y=V(k,`
  , or
  `),x=A(k,"LABEL",{class:!0});var K=j(x);p=A(K,"INPUT",{type:!0,class:!0}),b=V(K,`
    only the latest.`),K.forEach(T),k.forEach(T),this.h()},h(){B(n,"class","svelte-1vulii5"),B(m,"type","text"),m.value=c=o[2].text,B(m,"placeholder","text…"),B(m,"class","inline-input svelte-1vulii5"),B(p,"type","checkbox"),p.checked=w=o[2].showOnlyLatest,B(p,"class","svelte-1vulii5"),B(x,"class","inline-checkbox svelte-1vulii5"),B(e,"class","controls svelte-1vulii5")},m(_,k){z(_,e,k),C(e,t),C(e,n),C(n,l),C(e,f),C(e,u),C(e,h),E&&E.m(e,null),C(e,a),C(e,m),C(e,y),C(e,x),C(x,p),C(x,b),s||(S=[Be(m,"input",o[7]),Be(p,"change",o[8])],s=!0)},p(_,[k]){k&2&&r!==(r=_[1].length+"")&&ke(l,r),k&2&&d!==(d=_[1].length===1?"":"s")&&ke(u,d),_[0].length?E?E.p(_,k):(E=$e(_),E.c(),E.m(e,a)):E&&(E.d(1),E=null),k&5&&c!==(c=_[2].text)&&m.value!==c&&(m.value=c),k&5&&w!==(w=_[2].showOnlyLatest)&&(p.checked=w)},i:F,o:F,d(_){_&&T(e),E&&E.d(),s=!1,kt(S)}}}const At=1e4,Dt=5e3,St=20;function Lt(o,e,t){let n,r,l;ge(o,Et,w=>t(0,n=w)),ge(o,dt,w=>t(1,r=w)),ge(o,oe,w=>t(2,l=w));let f=Date.now(),d=!1,u=0;function h(){f=Date.now(),d=!1,u=0}function a(w){h(),oe.update(b=>({...b,keyword:w}))}function m(w){h(),oe.update(b=>({...b,text:w}))}function c(w){h(),oe.update(b=>({...b,showOnlyLatest:w}))}return at(()=>{const w=["mousemove","mousedown","click","keydown","wheel","touchstart","pointermove"];w.forEach(S=>window.addEventListener(S,h,{passive:!0}));let b=0;const s=setInterval(()=>{const S=Date.now()-f;!d&&S>=At&&n.length>0&&(d=!0,u=0),d&&n.length>0&&(b=(b+1)%n.length,oe.update(E=>({...E,keyword:n[b]})),u++,u>=St&&(d=!1))},Dt);return()=>{clearInterval(s),w.forEach(S=>window.removeEventListener(S,h))}}),[n,r,l,a,m,c,w=>a(w.target.value),w=>m(w.target.value),w=>c(w.target.checked)]}class Rt extends Ie{constructor(e){super(),Ae(this,e,Lt,It,_e,{})}}function xe(o,e){if(!o||!Array.isArray(e)||!e.length)return o;const t=r=>r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(e.filter(Boolean).sort((r,l)=>l.length-r.length).map(t).join("|"),"gi");return o.replace(n,r=>`<span class="highlight">${r}</span>`)}function tt(o){let e,t,n,r,l=xe(o[0],o[5])+"",f,d=o[6]&&nt(o),u=o[1]&&lt(o),h=o[2]&&ot();return{c(){e=D("div"),d&&d.c(),t=se(),u&&u.c(),n=se(),r=new ft(!1),f=se(),h&&h.c(),this.h()},l(a){e=A(a,"DIV",{class:!0,style:!0});var m=j(e);d&&d.l(m),t=re(m),u&&u.l(m),n=re(m),r=ct(m,!1),f=re(m),h&&h.l(m),m.forEach(T),this.h()},h(){r.a=f,B(e,"class","tooltip svelte-102e0u4"),H(e,"left",o[3]+15+"px"),H(e,"top",o[4]+"px")},m(a,m){z(a,e,m),d&&d.m(e,null),C(e,t),u&&u.m(e,null),C(e,n),r.m(l,e),C(e,f),h&&h.m(e,null)},p(a,m){a[6]?d?d.p(a,m):(d=nt(a),d.c(),d.m(e,t)):d&&(d.d(1),d=null),a[1]?u?u.p(a,m):(u=lt(a),u.c(),u.m(e,n)):u&&(u.d(1),u=null),m&33&&l!==(l=xe(a[0],a[5])+"")&&r.p(l),a[2]?h||(h=ot(),h.c(),h.m(e,null)):h&&(h.d(1),h=null),m&8&&H(e,"left",a[3]+15+"px"),m&16&&H(e,"top",a[4]+"px")},d(a){a&&T(e),d&&d.d(),u&&u.d(),h&&h.d()}}}function nt(o){let e,t,n;return{c(){e=D("div"),t=D("b"),n=U(o[6]),this.h()},l(r){e=A(r,"DIV",{style:!0});var l=j(e);t=A(l,"B",{});var f=j(t);n=V(f,o[6]),f.forEach(T),l.forEach(T),this.h()},h(){H(e,"font-size","0.98em"),H(e,"margin-bottom","0.25em")},m(r,l){z(r,e,l),C(e,t),C(t,n)},p(r,l){l&64&&ke(n,r[6])},d(r){r&&T(e)}}}function lt(o){let e,t,n=xe(o[1],o[5])+"";return{c(){e=D("div"),t=new ft(!1),this.h()},l(r){e=A(r,"DIV",{style:!0});var l=j(e);t=ct(l,!1),l.forEach(T),this.h()},h(){t.a=null,H(e,"font-size","0.98em"),H(e,"margin-bottom","0.25em")},m(r,l){z(r,e,l),t.m(n,e)},p(r,l){l&34&&n!==(n=xe(r[1],r[5])+"")&&t.p(n)},d(r){r&&T(e)}}}function ot(o){let e,t="[Press <kbd>space</kbd> to open link]";return{c(){e=D("div"),e.innerHTML=t,this.h()},l(n){e=A(n,"DIV",{style:!0,"data-svelte-h":!0}),Xe(e)!=="svelte-17k9t9i"&&(e.innerHTML=t),this.h()},h(){H(e,"font-size","0.92em"),H(e,"margin-top","0.5em")},m(n,r){z(n,e,r)},d(n){n&&T(e)}}}function Pt(o){let e,t=o[0]&&tt(o);return{c(){t&&t.c(),e=Me()},l(n){t&&t.l(n),e=Me()},m(n,r){t&&t.m(n,r),z(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=tt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:F,o:F,d(n){n&&T(e),t&&t.d(n)}}}function zt(o,e,t){let{hoveredText:n=""}=e,{hoveredTitle:r=""}=e,{hoveredUrl:l=""}=e,{tooltipX:f=0}=e,{tooltipY:d=0}=e,{keywords:u=[]}=e,{date:h=""}=e;return o.$$set=a=>{"hoveredText"in a&&t(0,n=a.hoveredText),"hoveredTitle"in a&&t(1,r=a.hoveredTitle),"hoveredUrl"in a&&t(2,l=a.hoveredUrl),"tooltipX"in a&&t(3,f=a.tooltipX),"tooltipY"in a&&t(4,d=a.tooltipY),"keywords"in a&&t(5,u=a.keywords),"date"in a&&t(6,h=a.date)},[n,r,l,f,d,u,h]}class Yt extends Ie{constructor(e){super(),Ae(this,e,zt,Pt,_e,{hoveredText:0,hoveredTitle:1,hoveredUrl:2,tooltipX:3,tooltipY:4,keywords:5,date:6})}}function Bt(o){let e,t="...";return{c(){e=D("div"),e.textContent=t,this.h()},l(n){e=A(n,"DIV",{class:!0,"data-svelte-h":!0}),Xe(e)!=="svelte-91c2k6"&&(e.textContent=t),this.h()},h(){B(e,"class","empty-state svelte-1rfl4nz")},m(n,r){z(n,e,r)},p:F,i:F,o:F,d(n){n&&T(e)}}}function Ot(o){let e=o[7],t,n,r=rt(o);return{c(){r.c(),t=Me()},l(l){r.l(l),t=Me()},m(l,f){r.m(l,f),z(l,t,f),n=!0},p(l,f){f&128&&_e(e,e=l[7])?(ht(),Q(r,1,1,F),ut(),r=rt(l),r.c(),$(r,1),r.m(t.parentNode,t)):r.p(l,f)},i(l){n||($(r),n=!0)},o(l){Q(r),n=!1},d(l){l&&T(t),r.d(l)}}}function rt(o){let e,t;return e=new bt({props:{sketch:o[8],style:"position:absolute; top:0; left:0;"}}),{c(){be(e.$$.fragment)},l(n){Ce(e.$$.fragment,n)},m(n,r){Ee(e,n,r),t=!0},p:F,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){Q(e.$$.fragment,n),t=!1},d(n){Te(e,n)}}}function Xt(o){var a,m;let e,t,n,r,l,f;const d=[Ot,Bt],u=[];function h(c,y){return c[0].length?0:1}return t=h(o),n=u[t]=d[t](o),l=new Yt({props:{hoveredText:o[1],hoveredTitle:o[3],hoveredUrl:o[2],tooltipX:o[4],tooltipY:o[5],keywords:((a=o[6])==null?void 0:a.keywords)||[],date:((m=o[6])==null?void 0:m.date)||""}}),{c(){e=D("div"),n.c(),r=se(),be(l.$$.fragment),this.h()},l(c){e=A(c,"DIV",{class:!0});var y=j(e);n.l(y),y.forEach(T),r=re(c),Ce(l.$$.fragment,c),this.h()},h(){B(e,"class","viz-container svelte-1rfl4nz")},m(c,y){z(c,e,y),u[t].m(e,null),z(c,r,y),Ee(l,c,y),f=!0},p(c,[y]){var w,b;let x=t;t=h(c),t===x?u[t].p(c,y):(ht(),Q(u[x],1,1,()=>{u[x]=null}),ut(),n=u[t],n?n.p(c,y):(n=u[t]=d[t](c),n.c()),$(n,1),n.m(e,null));const p={};y&2&&(p.hoveredText=c[1]),y&8&&(p.hoveredTitle=c[3]),y&4&&(p.hoveredUrl=c[2]),y&16&&(p.tooltipX=c[4]),y&32&&(p.tooltipY=c[5]),y&64&&(p.keywords=((w=c[6])==null?void 0:w.keywords)||[]),y&64&&(p.date=((b=c[6])==null?void 0:b.date)||""),l.$set(p)},i(c){f||($(n),$(l.$$.fragment,c),f=!0)},o(c){Q(n),Q(l.$$.fragment,c),f=!1},d(c){c&&(T(e),T(r)),u[t].d(),Te(l,c)}}}function st(o,e=300){if(!o)return"";if(o.length<=e)return o;let t=o.lastIndexOf(" ",e);return t===-1&&(t=e),o.slice(0,t)+"…"}function it(o,e,t=200){if(!o||!e)return st(o,t);const n=o.toLowerCase().indexOf(String(e).toLowerCase());if(n===-1)return st(o,t);let r=Math.max(0,n-Math.floor((t-e.length)/2)),l=r+t;if(l>o.length&&(l=o.length,r=Math.max(0,l-t)),r>0){const d=o.lastIndexOf(" ",r);d!==-1&&(r=d+1)}if(l<o.length){const d=o.indexOf(" ",l);d!==-1&&(l=d)}let f=o.slice(r,l);return r>0&&(f="…"+f),l<o.length&&(f=f+"…"),f}function Kt(o,e,t){let n,r,l,f;ge(o,dt,s=>t(0,l=s)),ge(o,oe,s=>t(11,f=s));const d={fungal:{branchingChance:.29,directionRandomness:2,branchAngle:Math.PI/1.4,downwardBias:.01},chaos:{branchingChance:2,directionRandomness:7,branchAngle:Math.PI/1.4,downwardBias:.01},covid:{branchingChance:10,directionRandomness:200,branchAngle:Math.PI/1.4,downwardBias:.01}},u=Object.keys(d);let h="chaos",a="",m="",c="",y=0,x=0,p=null;function w(s,S,E,_,k=[],ee="",K){t(1,a=s),t(2,m=S),t(3,c=K),t(4,y=E),t(5,x=_),t(6,p={keywords:k,date:ee})}let b=s=>{const S=l,E=()=>d[h]||d.fungal,_=.75,k=8*_,ee=12*_,K=100*_,we=8*_,De=new Map,Ke={};let Se=[],W={x:0,y:0},G=.8,Le=!1,Re=0,Pe=0,ze=0,te={x:0,y:0},ie={left:0,right:0,top:0,bottom:0},L,ae=new Map,ce=[],Ye=!0;function mt(i,g,v){const R=`${i}_${g}_${v}`;if(De.has(R))return De.get(R);const M=s.createGraphics(40*_,40*_);M.colorMode(s.HSB),M.textFont("courier"),M.textAlign(s.CENTER,s.CENTER),M.textSize(v);const P=Math.max(M.textWidth(g),4);return M.noStroke(),M.fill(Ke[i]||s.color(0,0,75)),M.rectMode(s.CENTER),M.rect(M.width/2,M.height/2,P+4,v+4),M.fill(0,0,0),M.text(g,M.width/2,M.height/2),De.set(R,M),M}function gt(i,g){const v=E();let R=i.dir0.copy();R.y+=v.downwardBias,R.normalize();let M=s.noise(g.x*.01*_,g.y*.01*_,ze*.05);const P=1;return R.rotate(s.map(M,0,1,-v.directionRandomness*P,v.directionRandomness*P)),R}function _t(i,g,v){var O,X,Y,Z,fe,he,ue,ve,ye,de,me,Ne,Ve,Ue,He,Fe;const R=g/2,M=v/2,P=Array.from(new Set(i.flatMap(I=>Array.isArray(I.KeywordMatch)?I.KeywordMatch:[])));P.forEach((I,pe)=>Ke[I]=s.color(0,0,55+pe*120/Math.max(P.length-1,1)));const ne=[];if(!i.length)return ne;let N=((X=(O=i[0])==null?void 0:O.KeywordMatch)==null?void 0:X[0])||"",q=it(((Y=i[0])==null?void 0:Y.Text)??((Z=i[0])==null?void 0:Z.sentence)??"",N);ne.push({kw:N,nodes:[s.createVector(R,M)],sentence:q,url:((fe=i[0])==null?void 0:fe.URL)||"",date:((he=i[0])==null?void 0:he.ExtractedDate)||((ue=i[0])==null?void 0:ue.Date)||"",title:((ve=i[0])==null?void 0:ve.Title)||"",maxSteps:Math.ceil(q.length*(we/k)),grown:0,frameCount:0,dir0:s.createVector(0,-1).normalize(),pathLength:0,distArr:[0],lastPlacedCharIndex:-1,finished:!1,parent:null,attachAt:0});for(let I=1;I<i.length;I++){let pe=Math.floor(Math.random()*Math.max(1,I)),J=ne[pe];const je=Math.max(3,J.nodes.length-3);let le=Math.max(1,Math.min(Math.floor(2+Math.random()*(je-2)),je-1)),yt=J.nodes[le]||J.nodes[J.nodes.length-1],We=J.nodes[le+1]?s.createVector(J.nodes[le+1].x-J.nodes[le].x,J.nodes[le+1].y-J.nodes[le].y).normalize():s.createVector(0,-1),pt=(Math.random()-.5)*Math.PI/1.2;We.rotate(pt);let Ge=((de=(ye=i[I])==null?void 0:ye.KeywordMatch)==null?void 0:de[0])||"",qe=it(((me=i[I])==null?void 0:me.Text)??((Ne=i[I])==null?void 0:Ne.sentence)??"",Ge);ne.push({kw:Ge,nodes:[yt.copy()],sentence:qe,url:((Ve=i[I])==null?void 0:Ve.URL)||"",date:((Ue=i[I])==null?void 0:Ue.ExtractedDate)||((He=i[I])==null?void 0:He.Date)||"",title:((Fe=i[I])==null?void 0:Fe.Title)||"",maxSteps:Math.ceil(qe.length*(we/k)),grown:0,frameCount:0,dir0:We,pathLength:0,distArr:[0],lastPlacedCharIndex:-1,finished:!1,parent:pe,attachAt:le})}return ne}function wt(i,g){return{x:(i-s.width/2)/G-W.x+te.x,y:(g-s.height/2)/G-W.y+te.y}}function vt(i,g){return{x:(i-te.x+W.x)*G+s.width/2,y:(g-te.y+W.y)*G+s.height/2}}s.setup=()=>{if(s.createCanvas(window.innerWidth,window.innerHeight),s.colorMode(s.HSB),s.textAlign(s.CENTER,s.CENTER),s.textSize(9*_),s.frameRate(30),!S||!S.length){L=null,ce=[];return}const i=4200*_,g=4200*_;te={x:i/2,y:g/2},ie={left:0,right:i,top:0,bottom:g},L=s.createGraphics(i,g),L.colorMode(s.HSB),L.textAlign(s.CENTER,s.CENTER),L.textFont("courier"),L.textSize(13*_),Se=_t(S,i,g),W={x:0,y:0},ze=0,ce=[],Ye=!0},s.draw=()=>{if(!L){s.background(0);return}ae=new Map,Se.forEach(i=>i.nodes.forEach(g=>{if(!g)return;const v=`${Math.floor(g.x/K)},${Math.floor(g.y/K)}`;ae.has(v)||ae.set(v,[]),ae.get(v).push(g)})),Se.forEach(i=>{if(i.finished||(i.frameCount++,i.frameCount%1!==0||i.grown>=i.maxSteps))return;const g=i.nodes&&i.nodes[i.nodes.length-1];if(!g)return;let v=gt(i,g);const[R,M]=[Math.floor(g.x/K),Math.floor(g.y/K)];for(let q=-1;q<=1;q++)for(let O=-1;O<=1;O++)(ae.get(`${R+q},${M+O}`)||[]).forEach(X=>{if(!X)return;const Y=g.dist(X);Y>0&&Y<ee&&v.add(s.createVector(g.x-X.x,g.y-X.y).normalize().mult(.6*_))});v.normalize();const P=s.Vector.add(g,s.Vector.mult(v,k));P.x=s.constrain(P.x,ie.left+10*_,ie.right-10*_),P.y=s.constrain(P.y,ie.top+10*_,ie.bottom-10*_),i.nodes.push(P),i.grown++;const ne=g.dist(P);i.pathLength+=ne,i.distArr.push(i.pathLength);let N=i.lastPlacedCharIndex+1;for(;N<i.sentence.length&&(N+.5)*we<i.pathLength;){const q=(N+.5)*we,O=i.distArr.findIndex(X=>X>=q);if(O>0){const X=i.distArr[O-1],Y=i.nodes[O-1],Z=i.nodes[O];if(!Y||!Z)break;const fe=(q-X)/Z.dist(Y),he=s.lerp(Y.x,Z.x,fe),ue=s.lerp(Y.y,Z.y,fe),ve=s.atan2(Z.y-Y.y,Z.x-Y.x),ye=i.sentence[N],de=ee/1.2,me=mt(i.kw,ye,de);me&&(L.push(),L.translate(he,ue),L.rotate(ve),L.imageMode(s.CENTER),L.image(me,0,-6),L.pop()),i.lastPlacedCharIndex<N&&ce.push({worldX:he,worldY:ue,radius:de*2,url:i.url||"",text:i.sentence,keywords:[i.kw],date:i.date,title:i.title}),i.lastPlacedCharIndex=N,N++}else break}i.grown>=i.maxSteps&&(i.finished=!0)}),ze++,s.background(0),s.push(),s.translate(s.width/2,s.height/2),s.scale(G),s.translate(W.x,W.y),s.image(L,-te.x,-te.y),s.pop(),Ye&&ce.length>0&&(Ye=!1,setTimeout(()=>{typeof s.mouseMoved=="function"&&s.mouseMoved()},0))},s.mousePressed=()=>{Le=!0,Re=s.mouseX,Pe=s.mouseY},s.mouseReleased=()=>{Le=!1},s.mouseDragged=()=>{if(!Le)return;const i=(s.mouseX-Re)/G,g=(s.mouseY-Pe)/G;W.x+=i,W.y+=g,Re=s.mouseX,Pe=s.mouseY},s.mouseWheel=i=>{const g=i.deltaY<0?1.05:.9523809523809523;return G=s.constrain(G*g,.5,2),!1},s.windowResized=()=>{s.resizeCanvas(window.innerWidth,window.innerHeight)},s.mouseOut=()=>w("","",0,0,[]),s.mouseMoved=()=>{const{x:i,y:g}=wt(s.mouseX,s.mouseY);t(6,p=null);for(let v of ce)if(s.dist(i,g,v.worldX,v.worldY)<v.radius){const{x:R,y:M}=vt(v.worldX,v.worldY);w(v.text,v.url,R,M-22,v.keywords,v.date,v.title),t(6,p=v);break}p||w("","",0,0,[])},s.keyPressed=()=>{if((s.key===" "||s.keyCode===32)&&(p!=null&&p.url))return window.open(p.url,"_blank"),!1}};return o.$$.update=()=>{o.$$.dirty&1&&t(10,n=l.map(s=>`${s.URL||""}|${s.ExtractedDate||s.Date||""}`).join("§")),o.$$.dirty&1024&&n&&t(9,h=u[Math.floor(Math.random()*u.length)]),o.$$.dirty&3584&&t(7,r=`${n}|${h}|${f.showOnlyLatest?"1":"0"}`)},[l,a,m,c,y,x,p,r,b,h,n,f]}class Nt extends Ie{constructor(e){super(),Ae(this,e,Kt,Xt,_e,{})}}function Vt(o){let e,t,n,r;return e=new Rt({}),n=new Nt({}),{c(){be(e.$$.fragment),t=se(),be(n.$$.fragment)},l(l){Ce(e.$$.fragment,l),t=re(l),Ce(n.$$.fragment,l)},m(l,f){Ee(e,l,f),z(l,t,f),Ee(n,l,f),r=!0},p:F,i(l){r||($(e.$$.fragment,l),$(n.$$.fragment,l),r=!0)},o(l){Q(e.$$.fragment,l),Q(n.$$.fragment,l),r=!1},d(l){l&&T(t),Te(e,l),Te(n,l)}}}function Ut(o){return at(async()=>{const e=await Tt("/all_merged.csv");Ct.set(e.map(t=>({...t,KeywordMatch:typeof t.KeywordMatch=="string"?t.KeywordMatch.replace(/[\[\]'"]/g,"").split(/[,;]/).map(n=>n.trim()).filter(Boolean):[],Text:t.Text||"",URL:t.URL||"",Title:t.Title||""})))}),[]}class Jt extends Ie{constructor(e){super(),Ae(this,e,Ut,Vt,_e,{})}}export{Jt as component,Zt as universal};
