import{s as ve,n as Z,d as fe,o as ke}from"../chunks/CArxwV3n.js";import{S as $e,i as Ee,d as m,b as M,m as u,e as I,f as $,j as R,n as De,z as ue,c as _,A as x,B as y,q as he,s as H,g as A,h as D,k as C,l as S,u as G,t as U,a as j,w as q,x as z,v as B}from"../chunks/B_uZpV_5.js";import{e as Y,f as Se,a as we,D as Te,K as Ae,G as Ce,T as Ke,c as Le}from"../chunks/BKglG_9v.js";const Me=!0,Ve=Object.freeze(Object.defineProperty({__proto__:null,prerender:Me},Symbol.toStringTag,{value:"Module"}));function _e(r,e,n){const t=r.slice();return t[8]=e[n],t[10]=n,t}function me(r,e,n){const t=r.slice();return t[11]=e[n],t[10]=n,t}function Oe(r){let e,n,t,o,l=Y(r[1]),i=[];for(let s=0;s<l.length;s+=1)i[s]=de(me(r,l,s));let h=Y(r[0]),c=[];for(let s=0;s<h.length;s+=1)c[s]=pe(_e(r,h,s));return{c(){e=R("div"),n=y("svg"),t=y("g");for(let s=0;s<i.length;s+=1)i[s].c();o=y("g");for(let s=0;s<c.length;s+=1)c[s].c();this.h()},l(s){e=I(s,"DIV",{class:!0});var d=$(e);n=x(d,"svg",{width:!0,height:!0});var a=$(n);t=x(a,"g",{class:!0});var p=$(t);for(let f=0;f<i.length;f+=1)i[f].l(p);p.forEach(m),o=x(a,"g",{});var E=$(o);for(let f=0;f<c.length;f+=1)c[f].l(E);E.forEach(m),a.forEach(m),d.forEach(m),this.h()},h(){u(t,"class","dates"),u(n,"width",be+2500),u(n,"height",r[2]),u(e,"class","timeline-container svelte-17dswvv")},m(s,d){M(s,e,d),_(e,n),_(n,t);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null);_(n,o);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(o,null)},p(s,d){if(d&14){l=Y(s[1]);let a;for(a=0;a<l.length;a+=1){const p=me(s,l,a);i[a]?i[a].p(p,d):(i[a]=de(p),i[a].c(),i[a].m(t,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=l.length}if(d&9){h=Y(s[0]);let a;for(a=0;a<h.length;a+=1){const p=_e(s,h,a);c[a]?c[a].p(p,d):(c[a]=pe(p),c[a].c(),c[a].m(o,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=h.length}d&4&&u(n,"height",s[2])},d(s){s&&m(e),ue(i,s),ue(c,s)}}}function Ie(r){let e,n="Loading snippets…";return{c(){e=R("p"),e.textContent=n},l(t){e=I(t,"P",{"data-svelte-h":!0}),De(e)!=="svelte-tsh39c"&&(e.textContent=n)},m(t,o){M(t,e,o)},p:Z,d(t){t&&m(e)}}}function Re(r){let e,n=ee(r[11])+"",t,o,l,i,h;return{c(){e=y("text"),t=C(n),l=y("line"),this.h()},l(c){e=x(c,"text",{class:!0,x:!0,y:!0,"text-anchor":!0});var s=$(e);t=A(s,n),s.forEach(m),l=x(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),$(l).forEach(m),this.h()},h(){u(e,"class","date svelte-17dswvv"),u(e,"x",o=r[3](r[11])),u(e,"y","20"),u(e,"text-anchor","middle"),u(l,"x1",i=r[3](r[11])),u(l,"y1","24"),u(l,"x2",h=r[3](r[11])),u(l,"y2",r[2]),u(l,"class","svelte-17dswvv")},m(c,s){M(c,e,s),_(e,t),M(c,l,s)},p(c,s){s&2&&n!==(n=ee(c[11])+"")&&H(t,n),s&2&&o!==(o=c[3](c[11]))&&u(e,"x",o),s&2&&i!==(i=c[3](c[11]))&&u(l,"x1",i),s&2&&h!==(h=c[3](c[11]))&&u(l,"x2",h),s&4&&u(l,"y2",c[2])},d(c){c&&(m(e),m(l))}}}function de(r){let e,n=r[10]%ge===0&&Re(r);return{c(){n&&n.c(),e=he()},l(t){n&&n.l(t),e=he()},m(t,o){n&&n.m(t,o),M(t,e,o)},p(t,o){t[10]%ge===0&&n.p(t,o)},d(t){t&&m(e),n&&n.d(t)}}}function pe(r){let e,n,t,o,l,i=r[8].before+"",h,c,s,d=r[8].match+"",a,p,E,f,v=r[8].after+"",w,K,L,N,P,k,T,te,F=ee(r[8].date)+"",J,ne,se,V,W,Q;return{c(){e=y("text"),n=y("tspan"),t=C("…"),o=S(),l=y("tspan"),h=C(i),c=S(),s=y("tspan"),a=C(d),E=S(),f=y("tspan"),w=C(v),K=S(),L=y("tspan"),N=C("…"),P=S(),k=y("a"),T=y("tspan"),te=C("Mentioned on "),J=C(F),ne=C(" ↗"),se=S(),this.h()},l(b){e=x(b,"text",{x:!0,y:!0,opacity:!0});var g=$(e);n=x(g,"tspan",{class:!0});var re=$(n);t=A(re,"…"),re.forEach(m),o=D(g),l=x(g,"tspan",{class:!0});var le=$(l);h=A(le,i),le.forEach(m),c=D(g),s=x(g,"tspan",{class:!0,fill:!0});var ie=$(s);a=A(ie,d),ie.forEach(m),E=D(g),f=x(g,"tspan",{class:!0});var ce=$(f);w=A(ce,v),ce.forEach(m),K=D(g),L=x(g,"tspan",{class:!0});var oe=$(L);N=A(oe,"…"),oe.forEach(m),P=D(g),k=x(g,"a",{href:!0,target:!0,class:!0});var ae=$(k);T=x(ae,"tspan",{class:!0,dx:!0});var X=$(T);te=A(X,"Mentioned on "),J=A(X,F),ne=A(X," ↗"),X.forEach(m),se=D(ae),ae.forEach(m),g.forEach(m),this.h()},h(){u(n,"class","text svelte-17dswvv"),u(l,"class","text svelte-17dswvv"),u(s,"class","highlight svelte-17dswvv"),u(s,"fill",p=r[8].visible?"blue":"#999"),u(f,"class","text svelte-17dswvv"),u(L,"class","text svelte-17dswvv"),u(T,"class","date svelte-17dswvv"),u(T,"dx","20"),u(k,"href",V=r[8].url),u(k,"target","_blank"),u(k,"class","svelte-17dswvv"),u(e,"x",W=r[3](r[8].date)),u(e,"y",ye+r[10]*xe),u(e,"opacity",Q=r[8].visible?1:.2)},m(b,g){M(b,e,g),_(e,n),_(n,t),_(e,o),_(e,l),_(l,h),_(e,c),_(e,s),_(s,a),_(e,E),_(e,f),_(f,w),_(e,K),_(e,L),_(L,N),_(e,P),_(e,k),_(k,T),_(T,te),_(T,J),_(T,ne),_(k,se)},p(b,g){g&1&&i!==(i=b[8].before+"")&&H(h,i),g&1&&d!==(d=b[8].match+"")&&H(a,d),g&1&&p!==(p=b[8].visible?"blue":"#999")&&u(s,"fill",p),g&1&&v!==(v=b[8].after+"")&&H(w,v),g&1&&F!==(F=ee(b[8].date)+"")&&H(J,F),g&1&&V!==(V=b[8].url)&&u(k,"href",V),g&1&&W!==(W=b[3](b[8].date))&&u(e,"x",W),g&1&&Q!==(Q=b[8].visible?1:.2)&&u(e,"opacity",Q)},d(b){b&&m(e)}}}function Ne(r){let e;function n(l,i){return l[0].length?Oe:Ie}let t=n(r),o=t(r);return{c(){e=R("section"),o.c(),this.h()},l(l){e=I(l,"SECTION",{class:!0});var i=$(e);o.l(i),i.forEach(m),this.h()},h(){u(e,"class","svelte-17dswvv")},m(l,i){M(l,e,i),o.m(e,null)},p(l,[i]){t===(t=n(l))&&o?o.p(l,i):(o.d(1),o=t(l),o&&(o.c(),o.m(e,null)))},i:Z,o:Z,d(l){l&&m(e),o.d()}}}const be=2e3,xe=24,ge=10,ye=40;function Pe(r,e="00:00"){const[n,t,o]=r.split("."),[l="00",i="00"]=e.split(":");return new Date(+o,+t-1,+n,+l,+i)}function Fe(r){return r.match(/[^\.!?]+[\.!?]+/g)||[r]}function Ge(r,e){const n=Fe(r),t=n.find(h=>e.some(c=>new RegExp(`\\b${c}\\b`,"i").test(h)))||n[0],o=e.find(h=>new RegExp(`\\b${h}\\b`,"i").test(t));if(!o)return{before:t,match:"",after:""};const l=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=t.match(new RegExp(`(.*?)(${l})(.*)`,"i"))||[];return{before:i[1]||"",match:i[2]||o,after:i[3]||""}}function ee(r){return r.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"})}function Ue(r,e,n){let t,o;fe(r,Se,a=>n(5,t=a)),fe(r,we,a=>n(6,o=a));let l=[],i=[],h=null,c=null,s=0;function d(a){return!h||!c||c-h===0?0:(c-a)/(c-h)*be}return r.$$.update=()=>{if(r.$$.dirty&115){const a=o,p=new Set(t.map(E=>`${E.ExtractedDate}|${E.ExtractedTime[0]}|${E.URL}`));if(Array.isArray(a)&&a.length){n(0,l=a.map(f=>{const v=f.KeywordExtracted||[],{before:w,match:K,after:L}=Ge(f.Text,v),N=Pe(f.ExtractedDate,f.ExtractedTime[0]),P=`${f.ExtractedDate}|${f.ExtractedTime[0]}|${f.URL}`;return{date:N,before:w,match:K,after:L,url:f.URL,visible:p.has(P)}}).sort((f,v)=>v.date-f.date));const E=l.map(f=>f.date.getTime());n(1,i=Array.from(new Set(E)).sort((f,v)=>f-v).map(f=>new Date(f))),h||(n(4,h=i[0]),c=i[i.length-1]),n(2,s=ye+l.length*xe+40)}}},[l,i,s,d,h,t,o]}class je extends $e{constructor(e){super(),Ee(this,e,Ue,Ne,ve,{})}}function qe(r){let e,n,t,o,l,i,h,c,s,d,a,p,E;return t=new Te({}),l=new Ae({}),h=new Ce({}),s=new Ke({}),p=new je({}),{c(){e=R("main"),n=R("section"),B(t.$$.fragment),o=S(),B(l.$$.fragment),i=S(),B(h.$$.fragment),c=S(),B(s.$$.fragment),d=S(),a=R("section"),B(p.$$.fragment),this.h()},l(f){e=I(f,"MAIN",{});var v=$(e);n=I(v,"SECTION",{class:!0});var w=$(n);z(t.$$.fragment,w),o=D(w),z(l.$$.fragment,w),i=D(w),z(h.$$.fragment,w),c=D(w),z(s.$$.fragment,w),w.forEach(m),d=D(v),a=I(v,"SECTION",{class:!0});var K=$(a);z(p.$$.fragment,K),K.forEach(m),v.forEach(m),this.h()},h(){u(n,"class","filters"),u(a,"class","timeline-wrapper")},m(f,v){M(f,e,v),_(e,n),q(t,n,null),_(n,o),q(l,n,null),_(n,i),q(h,n,null),_(n,c),q(s,n,null),_(e,d),_(e,a),q(p,a,null),E=!0},p:Z,i(f){E||(j(t.$$.fragment,f),j(l.$$.fragment,f),j(h.$$.fragment,f),j(s.$$.fragment,f),j(p.$$.fragment,f),E=!0)},o(f){U(t.$$.fragment,f),U(l.$$.fragment,f),U(h.$$.fragment,f),U(s.$$.fragment,f),U(p.$$.fragment,f),E=!1},d(f){f&&m(e),G(t),G(l),G(h),G(s),G(p)}}}function O(r){if(!r)return[];try{const e=JSON.parse(r.replace(/'/g,'"'));return Array.isArray(e)?e:[]}catch{return r.split(/[,;]\s*/).filter(Boolean)}}function ze(r){return ke(async()=>{const n=(await Le("parsed.csv")).map(t=>{const o=O(t.KeywordMatch),l=O(t.KeywordExtracted),i=O(t.ExtractedTime),h=O(t.ExtractedAge),c=O(t.ExtractedGender),s=O(t.ExtractedAction),a=O(t.ExtractedDistrict)[0]||t.Location||"";return{...t,KeywordMatch:o,KeywordExtracted:l,ExtractedTime:i,ExtractedAge:h,ExtractedGender:c,ExtractedAction:s,ExtractedDistrict:a,ExtractedDate:t.ExtractedDate||t.Date}});we.set(n)}),[]}class We extends $e{constructor(e){super(),Ee(this,e,ze,qe,ve,{})}}export{We as component,Ve as universal};
