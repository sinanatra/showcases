import{s as he,n as ee,d as v,i as C,b as u,f as P,h as O,j,y as ae,H as ge,F as se,q as g,V as S,W as A,z as le,p as X,t as R,v as B,w as F,x as M,o as ve}from"../chunks/7zwduY7e.js";import{S as de,i as me,d as H,t as U,a as V,m as W,e as J,b as Q}from"../chunks/D_8M7GTZ.js";import{c as be}from"../chunks/CKvn6CDR.js";import{f as Ee,a as _e}from"../chunks/Bq54tBkh.js";import{D as $e,K as xe,G as ye,T as ke}from"../chunks/C5lsure-.js";import{e as Z}from"../chunks/D6YF6ztN.js";const we=!0,je=Object.freeze(Object.defineProperty({__proto__:null,prerender:we},Symbol.toStringTag,{value:"Module"}));function ie(a,e,n){const t=a.slice();return t[14]=e[n],t[16]=n,t}function oe(a,e,n){const t=a.slice();return t[17]=e[n],t[16]=n,t}function Oe(a){let e,n,t,c,o=Z(a[1]),l=[];for(let r=0;r<o.length;r+=1)l[r]=ce(oe(a,o,r));let h=Z(a[0]),i=[];for(let r=0;r<h.length;r+=1)i[r]=fe(ie(a,h,r));return{c(){e=j("div"),n=A("svg"),t=A("g");for(let r=0;r<l.length;r+=1)l[r].c();c=A("g");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=P(r,"DIV",{class:!0});var E=O(e);n=S(E,"svg",{width:!0,height:!0});var s=O(n);t=S(s,"g",{class:!0});var p=O(t);for(let m=0;m<l.length;m+=1)l[m].l(p);p.forEach(v),c=S(s,"g",{});var D=O(c);for(let m=0;m<i.length;m+=1)i[m].l(D);D.forEach(v),s.forEach(v),E.forEach(v),this.h()},h(){u(t,"class","dates"),u(n,"width",pe+2500),u(n,"height",a[2]),u(e,"class","timeline-container svelte-kfh6xb")},m(r,E){C(r,e,E),g(e,n),g(n,t);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null);g(n,c);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(c,null)},p(r,E){if(E&30){o=Z(r[1]);let s;for(s=0;s<o.length;s+=1){const p=oe(r,o,s);l[s]?l[s].p(p,E):(l[s]=ce(p),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}if(E&25){h=Z(r[0]);let s;for(s=0;s<h.length;s+=1){const p=ie(r,h,s);i[s]?i[s].p(p,E):(i[s]=fe(p),i[s].c(),i[s].m(c,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=h.length}E&4&&u(n,"height",r[2])},d(r){r&&v(e),se(l,r),se(i,r)}}}function De(a){let e,n="Loading snippets…";return{c(){e=j("p"),e.textContent=n},l(t){e=P(t,"P",{"data-svelte-h":!0}),ge(e)!=="svelte-tsh39c"&&(e.textContent=n)},m(t,c){C(t,e,c)},p:ee,d(t){t&&v(e)}}}function Se(a){let e,n=ne(a[17])+"",t,c,o,l,h;return{c(){e=A("text"),t=F(n),o=A("line"),this.h()},l(i){e=S(i,"text",{class:!0,x:!0,y:!0,"font-size":!0,"dominant-baseline":!0,"text-anchor":!0});var r=O(e);t=R(r,n),r.forEach(v),o=S(i,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0}),O(o).forEach(v),this.h()},h(){u(e,"class","date svelte-kfh6xb"),u(e,"x",c=a[4](a[17])),u(e,"y",te-G/2),u(e,"font-size",a[3]),u(e,"dominant-baseline","middle"),u(e,"text-anchor","left"),u(o,"x1",l=a[4](a[17])),u(o,"y1",te-.5*G),u(o,"x2",h=a[4](a[17])),u(o,"y2",a[2]),u(o,"class","svelte-kfh6xb")},m(i,r){C(i,e,r),g(e,t),C(i,o,r)},p(i,r){r&2&&n!==(n=ne(i[17])+"")&&X(t,n),r&2&&c!==(c=i[4](i[17]))&&u(e,"x",c),r&2&&l!==(l=i[4](i[17]))&&u(o,"x1",l),r&2&&h!==(h=i[4](i[17]))&&u(o,"x2",h),r&4&&u(o,"y2",i[2])},d(i){i&&(v(e),v(o))}}}function ce(a){let e,n=a[16]%ue===0&&Se(a);return{c(){n&&n.c(),e=le()},l(t){n&&n.l(t),e=le()},m(t,c){n&&n.m(t,c),C(t,e,c)},p(t,c){t[16]%ue===0&&n.p(t,c)},d(t){t&&v(e),n&&n.d(t)}}}function fe(a){let e,n,t=a[14].before+"",c,o,l,h=a[14].match+"",i,r,E,s,p=a[14].after+"",D,m,y,k,f=ne(a[14].date)+"",$,_,d,w,T,I;return{c(){e=A("text"),n=A("tspan"),c=F(t),o=M(),l=A("tspan"),i=F(h),E=M(),s=A("tspan"),D=F(p),m=M(),y=A("a"),k=A("tspan"),$=F(f),_=F(" ↗"),d=M(),this.h()},l(x){e=S(x,"text",{x:!0,y:!0,"font-size":!0,"dominant-baseline":!0,opacity:!0,class:!0});var b=O(e);n=S(b,"tspan",{class:!0});var z=O(n);c=R(z,t),z.forEach(v),o=B(b),l=S(b,"tspan",{class:!0,fill:!0});var K=O(l);i=R(K,h),K.forEach(v),E=B(b),s=S(b,"tspan",{class:!0});var N=O(s);D=R(N,p),N.forEach(v),m=B(b),y=S(b,"a",{href:!0,target:!0,class:!0});var q=O(y);k=S(q,"tspan",{class:!0,dx:!0});var Y=O(k);$=R(Y,f),_=R(Y," ↗"),Y.forEach(v),d=B(q),q.forEach(v),b.forEach(v),this.h()},h(){u(n,"class","text svelte-kfh6xb"),u(l,"class","highlight svelte-kfh6xb"),u(l,"fill",r=a[14].visible?"var(--color-1)":"#999"),u(s,"class","text svelte-kfh6xb"),u(k,"class","date svelte-kfh6xb"),u(k,"dx","2"),u(y,"href",w=a[14].url),u(y,"target","_blank"),u(y,"class","svelte-kfh6xb"),u(e,"x",T=a[4](a[14].date)),u(e,"y",te+a[16]*G+G/2),u(e,"font-size",a[3]),u(e,"dominant-baseline","middle"),u(e,"opacity",I=a[14].visible?1:.2),u(e,"class","svelte-kfh6xb")},m(x,b){C(x,e,b),g(e,n),g(n,c),g(e,o),g(e,l),g(l,i),g(e,E),g(e,s),g(s,D),g(e,m),g(e,y),g(y,k),g(k,$),g(k,_),g(y,d)},p(x,b){b&1&&t!==(t=x[14].before+"")&&X(c,t),b&1&&h!==(h=x[14].match+"")&&X(i,h),b&1&&r!==(r=x[14].visible?"var(--color-1)":"#999")&&u(l,"fill",r),b&1&&p!==(p=x[14].after+"")&&X(D,p),b&1&&f!==(f=ne(x[14].date)+"")&&X($,f),b&1&&w!==(w=x[14].url)&&u(y,"href",w),b&1&&T!==(T=x[4](x[14].date))&&u(e,"x",T),b&1&&I!==(I=x[14].visible?1:.2)&&u(e,"opacity",I)},d(x){x&&v(e)}}}function Ae(a){let e;function n(o,l){return o[0].length?Oe:De}let t=n(a),c=t(a);return{c(){e=j("section"),c.c(),this.h()},l(o){e=P(o,"SECTION",{class:!0});var l=O(e);c.l(l),l.forEach(v),this.h()},h(){u(e,"class","svelte-kfh6xb")},m(o,l){C(o,e,l),c.m(e,null)},p(o,[l]){t===(t=n(o))&&c?c.p(o,l):(c.d(1),c=t(o),c&&(c.c(),c.m(e,null)))},i:ee,o:ee,d(o){o&&v(e),c.d()}}}const G=16,pe=2e3,ue=120,te=40;function Te(a,e="00:00"){const[n,t,c]=a.split("."),[o="00",l="00"]=e.split(":");return new Date(+c,+t-1,+n,+o,+l)}function Ie(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ne(a){return a.toLocaleDateString("de-DE",{day:"numeric",month:"long",year:"numeric"})}function ze(a,e,n){let t,c;ae(a,Ee,f=>n(6,t=f)),ae(a,_e,f=>n(7,c=f));const o=Math.round(G*.9);let l=[],h=[],i=null,r=null,E=0;const s=["Nr","Dr","z.B","etc","u.a"];function p(f,$){for(const _ of s)if(f.slice($-_.length,$)===_)return!0;return!1}function D(f,$){let _=Math.max(f.lastIndexOf(".",$-1),f.lastIndexOf("!",$-1),f.lastIndexOf("?",$-1));for(;_>-1&&f[_]==="."&&p(f,_);)_=Math.max(f.lastIndexOf(".",_-1),f.lastIndexOf("!",_-1),f.lastIndexOf("?",_-1));return _}function m(f,$){let _=[f.indexOf(".",$),f.indexOf("!",$),f.indexOf("?",$)].filter(w=>w>=0),d=_.length?Math.min(..._):-1;for(;d>-1&&f[d]==="."&&p(f,d);)_=[f.indexOf(".",d+1),f.indexOf("!",d+1),f.indexOf("?",d+1)].filter(w=>w>=0),d=_.length?Math.min(..._):-1;return d}function y(f,$){if(!$||!$.length)return{before:f.slice(0,200),match:"",after:""};let _=null,d="";for(const N of $){const q=Ie(N),re=new RegExp(`\\b${q}\\b`,"i").exec(f);if(re){_=re,d=re[0];break}}if(!_)return{before:f.slice(0,200),match:"",after:""};const w=_.index,T=d.length,I=D(f,w),x=m(f,w+T),b=x>-1?x:f.length-1,z=f.slice(I+1,b+1),K=w-(I+1);return{before:z.slice(0,K),match:z.slice(K,K+T),after:z.slice(K+T)}}function k(f){return!i||!r||r-i===0?0:(r-f)/(r-i)*pe}return a.$$.update=()=>{if(a.$$.dirty&227){const f=c,$=new Set(t.map(_=>`${_.ExtractedDate}|${_.ExtractedTime[0]}|${_.URL}`));if(Array.isArray(f)&&f.length){n(0,l=f.map(d=>{const w=d.KeywordExtracted||[],{before:T,match:I,after:x}=y(d.Text,w),b=Te(d.ExtractedDate,d.ExtractedTime[0]),z=`${d.ExtractedDate}|${d.ExtractedTime[0]}|${d.URL}`;return{date:b,before:T,match:I,after:x,url:d.URL,visible:$.has(z)}}).sort((d,w)=>w.date-d.date));const _=l.map(d=>d.date.getTime());n(1,h=Array.from(new Set(_)).sort((d,w)=>d-w).map(d=>new Date(d))),i||(n(5,i=h[0]),r=h[h.length-1]),n(2,E=te+l.length*G+40)}}},[l,h,E,o,k,i,t,c]}class Be extends de{constructor(e){super(),me(this,e,ze,Ae,he,{})}}function Me(a){let e,n,t,c,o,l,h,i,r,E,s,p,D;return t=new $e({}),o=new xe({}),h=new ye({}),r=new ke({}),p=new Be({}),{c(){e=j("main"),n=j("section"),Q(t.$$.fragment),c=M(),Q(o.$$.fragment),l=M(),Q(h.$$.fragment),i=M(),Q(r.$$.fragment),E=M(),s=j("section"),Q(p.$$.fragment),this.h()},l(m){e=P(m,"MAIN",{});var y=O(e);n=P(y,"SECTION",{class:!0});var k=O(n);J(t.$$.fragment,k),c=B(k),J(o.$$.fragment,k),l=B(k),J(h.$$.fragment,k),i=B(k),J(r.$$.fragment,k),k.forEach(v),E=B(y),s=P(y,"SECTION",{class:!0});var f=O(s);J(p.$$.fragment,f),f.forEach(v),y.forEach(v),this.h()},h(){u(n,"class","filters svelte-3z88xz"),u(s,"class","timeline-wrapper")},m(m,y){C(m,e,y),g(e,n),W(t,n,null),g(n,c),W(o,n,null),g(n,l),W(h,n,null),g(n,i),W(r,n,null),g(e,E),g(e,s),W(p,s,null),D=!0},p:ee,i(m){D||(V(t.$$.fragment,m),V(o.$$.fragment,m),V(h.$$.fragment,m),V(r.$$.fragment,m),V(p.$$.fragment,m),D=!0)},o(m){U(t.$$.fragment,m),U(o.$$.fragment,m),U(h.$$.fragment,m),U(r.$$.fragment,m),U(p.$$.fragment,m),D=!1},d(m){m&&v(e),H(t),H(o),H(h),H(r),H(p)}}}function L(a){if(!a)return[];try{const e=JSON.parse(a.replace(/'/g,'"'));return Array.isArray(e)?e:[]}catch{return a.split(/[,;]\s*/).filter(Boolean)}}function Ce(a){return ve(async()=>{const n=(await be("all_merged.csv")).map(t=>{const c=L(t.KeywordMatch),o=L(t.KeywordExtracted),l=L(t.ExtractedTime),h=L(t.ExtractedAge),i=L(t.ExtractedGender),r=L(t.ExtractedAction),s=L(t.ExtractedDistrict)[0]||t.Location||"";return{...t,KeywordMatch:c,KeywordExtracted:o,ExtractedTime:l,ExtractedAge:h,ExtractedGender:i,ExtractedAction:r,ExtractedDistrict:s,ExtractedDate:t.ExtractedDate||t.Date}});_e.set(n)}),[]}class Ge extends de{constructor(e){super(),me(this,e,Ce,Me,he,{})}}export{Ge as component,je as universal};
